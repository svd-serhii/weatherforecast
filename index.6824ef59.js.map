{"mappings":"YAGA,IAAMA,ECEG,CACLC,KAAMC,SAASC,cAAc,QAC7BC,KAAMF,SAASC,cAAc,iBAC7BE,KAAMH,SAASC,cAAc,iBAC7BG,UAAWJ,SAASC,cAAc,QAClCI,SAAUL,SAASC,cAAc,QACjCK,IAAKN,SAASC,cAAc,SAC5BM,KAAMP,SAASC,cAAc,sBDPjCH,EAAKK,KAAKK,iBAAiB,SAsB3B,WACE,IAAIC,EAAMX,EAAKO,SAASK,MACpBC,EAAMb,EAAKM,UAAUM,MAIrBE,EAAM,GAAmBC,OC/BP,mDD+BA,SAAkBA,OAAXJ,EAAI,SAAoBI,OAAbF,EAAI,WAAsBE,OCjC7C,mCDiCoC,WAAuBA,OADpE,SAC4D,UAAaA,OAF1E,MAIXC,MAAMF,GACHG,MAAK,SAAAC,GACJ,IAAKA,EAAKC,GAAI,MAAM,IAAIC,MAAMF,EAAKG,YACnC,OAAOH,EAAKI,M,IAEbL,MAAK,SAAAM,GACJC,QAAQC,IAAIF,EAAKd,MAOvB,SAAuBc,GACrBC,QAAQC,IAAIF,GA4CZvB,EAAKQ,IAAIkB,UAAY,GA1CrB,IAAMC,EAAaJ,EAAKK,KACrBC,KAAI,SAACC,EAAKC,GACT,GAAIA,GAAO,EAAG,CACZ,IAAIC,EAAK,IAAIC,KAAc,IAATH,EAAIE,IAGtB,MAAO,iGAKKjB,OAHuBiB,EAAGE,eAAe,yFAMpCnB,OAHLe,EAAIK,QAAQ,GAAGC,KAChB,6EAKwBrB,OAHlBe,EAAIK,QAAQ,GAAGE,YAAY,6GAIStB,OADlBe,EAAIK,QAAQ,GAAGG,KAAK,sEAIXvB,OAHSe,EAAIQ,KAAKC,KAAKC,QACvD,GACA,iEAI8BzB,OAHEe,EAAIQ,KAAKG,WAAWD,QACpD,GACA,gEAE8BzB,OADAe,EAAIQ,KAAKI,SAAS,4DAEtB3B,OADIe,EAAIQ,KAAKK,SAAS,uDAE1D5B,OADoCe,EAAIc,KAAKC,MAAM,SAEpD9B,OADCe,EAAIc,KAAKE,IACV,kH,KAQJC,KAAK,KAER/C,EAAKQ,IAAIwC,mBAAmB,YAAarB,E,CA9CrCsB,CAAc1B,E,IAEf2B,MAAM1B,QAAQ2B,I,IAtCnBnD,EAAKI,KAAKM,iBAAiB,SAE3B,SAAqB0C,GAMnBC,UAAUC,YAAYC,oBAEtB,SAAaC,GACXxD,EAAKM,UAAUM,MAAQ4C,EAASC,OAAOnD,UAAUkC,QAAQ,GACzDxC,EAAKO,SAASK,MAAQ4C,EAASC,OAAOlD,SAASiC,QAAQ,GACvDhB,QAAQC,IAAI+B,E,IAEd,SAAaE,GACXlC,QAAQC,IAAIiC,E,GAbH,CACTC,oBAAoB,EACpBC,QAAS,IACTC,WAAY,K","sources":["src/js/fetchApi.js","src/js/refs.js"],"sourcesContent":["import { GEO_URL, API_KEY, BASE_URL } from './refs';\nimport { getRefs } from './refs';\n\nconst refs = getRefs();\n\nrefs.btnF.addEventListener('click', fetchWeather);\n\nrefs.btnP.addEventListener('click', getLocation);\n\nfunction getLocation(e) {\n  let opts = {\n    enableHighAccuracy: true,\n    timeout: 1000 * 10,\n    maximumAge: 1000 * 60 * 5,\n  };\n  navigator.geolocation.getCurrentPosition(ftw, wtf, opts);\n\n  function ftw(position) {\n    refs.longitude.value = position.coords.longitude.toFixed(2);\n    refs.latitude.value = position.coords.latitude.toFixed(2);\n    console.log(position);\n  }\n  function wtf(error) {\n    console.log(error);\n  }\n}\n\nfunction fetchWeather() {\n  let lat = refs.latitude.value;\n  let lon = refs.longitude.value;\n  let key = API_KEY;\n  let lang = 'en';\n  let units = 'metric';\n  let url = `${BASE_URL}?lat=${lat}&lon=${lon}&appid=${key}&units=${units}&lang=${lang}`;\n\n  fetch(url)\n    .then(resp => {\n      if (!resp.ok) throw new Error(resp.statusText);\n      return resp.json();\n    })\n    .then(data => {\n      console.log(data.city);\n      //   renderPosition(data);\n      renderWeather(data);\n    })\n    .catch(console.err);\n}\n\nfunction renderWeather(data) {\n  console.log(data);\n  clearCard();\n  const cardMarkup = data.list\n    .map((day, idx) => {\n      if (idx <= 4) {\n        let dt = new Date(day.dt * 1000); //timestamp * 1000\n        // let sr = new Date(city.sunrise * 1000).toTimeString();\n        // let ss = new Date(city.sunset * 1000).toTimeString();\n        return `<div class=\"col\">\n              <div class=\"card\">\n              <h2 class=\"card-title p-2\">${dt.toDateString()}</h2>\n                <img\n                  src=\"http://openweathermap.org/img/wn/${\n                    day.weather[0].icon\n                  }@4x.png\"\n                  class=\"card-img-top\"\n                  alt=\"${day.weather[0].description}\"\n                />\n                <div class=\"card-body\">\n                  <h3 class=\"card-title\">${day.weather[0].main}</h3>\n                  <p class=\"card-text\">Current temperature ${day.main.temp.toFixed(\n                    0\n                  )}&deg;</p>\n                  <p class=\"card-text\">Feels like ${day.main.feels_like.toFixed(\n                    0\n                  )}&deg;C</p>\n                  <p class=\"card-text\">Pressure ${day.main.pressure}mb</p>\n                  <p class=\"card-text\">Humidity ${day.main.humidity}%</p>\n                  <p class=\"card-text\">Wind ${day.wind.speed}m/s, ${\n          day.wind.deg\n        }&deg;</p>\n                \n                </div>\n              </div>\n            </div>\n          </div>`;\n      }\n    })\n    .join(' ');\n\n  refs.row.insertAdjacentHTML('beforeend', cardMarkup);\n}\n\nfunction clearCard(data) {\n  refs.row.innerHTML = '';\n}\n\n// function renderPosition(data) {\n//   //   console.log(data);\n//   const cityMarkup = data.city\n//     .map(name => {\n//       return ` <div class=\"current-position\">\n//         <h2 class=\"city-name\">Your current city ${name} -</h2>\n//       </div>`;\n//     })\n//     .join('');\n//   refs.city.insertAdjacentHTML('beforebegin', cityMarkup);\n// }\n\n//   ;\n//  <p class=\"card-text\">Sunrise ${sr}</p>\n//   <p class=\"card-text\">Sunset ${ss}</p>\n","export const API_KEY = '54314ea03ea88e3952e76d8fb7f8add2';\nexport const GEO_URL = 'https://api.openweathermap.org/data/2.5/weather';\nexport const BASE_URL = 'https://api.openweathermap.org/data/2.5/forecast';\n\nexport function getRefs() {\n  return {\n    body: document.querySelector('body'),\n    btnP: document.querySelector('#get-location'),\n    btnF: document.querySelector('#get-forecast'),\n    longitude: document.querySelector('.lon'),\n    latitude: document.querySelector('.lat'),\n    row: document.querySelector(' .row'),\n    city: document.querySelector('.forecast-request'),\n  };\n}\n"],"names":["$056c7ba59ad648af$var$refs","body","document","querySelector","btnP","btnF","longitude","latitude","row","city","addEventListener","lat","value","lon","url","concat","fetch","then","resp","ok","Error","statusText","json","data","console","log","innerHTML","cardMarkup","list","map","day","idx","dt","Date","toDateString","weather","icon","description","main","temp","toFixed","feels_like","pressure","humidity","wind","speed","deg","join","insertAdjacentHTML","$056c7ba59ad648af$var$renderWeather","catch","err","e","navigator","geolocation","getCurrentPosition","position","coords","error","enableHighAccuracy","timeout","maximumAge"],"version":3,"file":"index.6824ef59.js.map"}